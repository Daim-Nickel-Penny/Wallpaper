 /* 
 * Wallpaper - Adds a smooth-scaling, page-filling background
 * @author Ben Plum
 * @version 2.0.1
 *
 * Copyright Â© 2013 Ben Plum <mr@benplum.com>
 * Released under the MIT License <http://www.opensource.org/licenses/mit-license.php>
 */

if(jQuery)(function(c){function m(b){b=c.extend({},e,b);for(var a=c(this),d=0,f=a.length;d<f;d++)n.apply(a.eq(d),[c.extend({},b)]);c("body").hasClass("wallpaper-inititalized")||(c("body").addClass("wallpaper-inititalized"),c(window).on("resize.wallpaper",b,p));return a}function n(b){var a=c(this);a.hasClass("wallpaper")||(c.extend(b,a.data("wallpaper-options")),a.addClass("wallpaper").append('<div class="wallpaper-container"></div>'),b.isAnimating=!1,b.$target=a,b.$container=b.$target.find(".wallpaper-container"), b.fixed&&b.$container.addClass("wallpaper-fixed"),b.$target.data("wallpaper",b).on("resize.wallpaper",b,f),h(b.source,b),b.onReady.call())}function h(b,a){if(a.currentSource!=b&&!1===a.isAnimating){a.currentSource=b;a.isAnimating=!0;var d=c('<div class="wallpaper-image"><img class="" /></div>');$img=d.find("img");$img.one("load",function(){a.fixed&&d.addClass("fixed").css({backgroundImage:"url("+a.source+")"});1>a.$container.find(".wallpaper-image").length?(d.css({opacity:1}).appendTo(a.$container), a.isAnimating=!1):d.appendTo(a.$container).animate({opacity:1},a.speed,function(){a.$container.find(".wallpaper-image").not(":last").remove();a.isAnimating=!1});f({data:a});a.onLoad.call()}).attr("src",a.currentSource);$img[0].complete&&$img.trigger("load")}}function f(b){var a=b.data;b.preventDefault&&(b.preventDefault(),b.stopPropagation());b=a.$container.find(".wallpaper-image");for(var c=0,f=b.length;c<f;c++){var e=b.eq(c),g=e.find("img");if(0<g.length){var k=a.$target.outerWidth(),h=a.$target.outerHeight(); a.width=g[0].naturalWidth;a.height=g[0].naturalHeight;a.left=0;a.top=0;g=a.width/a.height;a.height=h;a.width=a.height*g;a.width<k&&(a.width=k,a.height=a.width/g);a.left=-(a.width-k)/2;a.top=-(a.height-h)/2;a.fixed?e.css({backgroundPosition:a.left+"px "+a.top+"px",backgroundSize:a.width+"px "+a.height+"px"}):e.css({height:a.height,width:a.width,left:a.left,top:a.top})}}}function p(){c(".wallpaper").each(function(){var b=c(this).data("wallpaper");f({data:b})})}var e={fixed:!1,onReady:function(){},onLoad:function(){}, source:"",speed:"500"},l={defaults:function(b){e=c.extend(e,b||{});return c(this)},destroy:function(){var b=c(this).each(function(){var a=c(this).data("wallpaper");a.$target.removeClass("wallpaper");a.$container.remove()});1>c(".wallpaper").length&&c(window).off(".wallpaper");return b},load:function(b){return c(this).each(function(){var a=c(this).data("wallpaper");h(b,a)})}};c.fn.wallpaper=function(b){return l[b]?l[b].apply(this,Array.prototype.slice.call(arguments,1)):"object"!==typeof b&&b?this: m.apply(this,arguments)}})(jQuery);